<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Lifted - CSS Shadows Demo</title>
  <style>
    * { box-sizing: border-box; margin: 0; padding: 0; }
    body {
      font-family: system-ui, -apple-system, sans-serif;
      min-height: 100vh;
      padding: 2rem;
      transition: background-color 0.3s, color 0.3s;
    }
    body.light { background-color: #f5f5f7; color: #1a1a2e; }
    body.dark { background-color: #1a1a2e; color: #ffffff; }
    header { text-align: center; margin-bottom: 2rem; }
    h1 { font-size: 2.5rem; margin-bottom: 0.5rem; }
    .subtitle { opacity: 0.7; max-width: 600px; margin: 0 auto; }
    .controls {
      display: flex; gap: 1.5rem; flex-wrap: wrap;
      justify-content: center; margin-bottom: 3rem; padding: 1rem;
    }
    .control-group { display: flex; flex-direction: column; align-items: center; gap: 0.5rem; }
    .control-group label { font-size: 0.85rem; opacity: 0.7; }
    button {
      padding: 0.5rem 1rem; border-radius: 6px; border: none;
      cursor: pointer; font-size: 0.9rem; transition: all 0.15s;
    }
    body.light button { background: #e0e0e0; color: #333; }
    body.dark button { background: #4a4a6a; color: #fff; }
    input[type="range"] { width: 150px; }
    input[type="color"] { width: 50px; height: 30px; border: none; border-radius: 4px; cursor: pointer; }
    .demo-grid {
      display: grid; grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
      gap: 2rem; max-width: 1200px; margin: 0 auto;
    }
    .demo-section h3 {
      font-size: 0.9rem; text-transform: uppercase;
      letter-spacing: 0.05em; opacity: 0.6; margin-bottom: 1rem;
    }
    .lifted-box {
      padding: 2rem; border-radius: 12px;
      transition: box-shadow 150ms cubic-bezier(0.2, 0.6, 0.3, 1);
    }
    .lifted-box h4 { margin: 0 0 0.5rem; }
    .lifted-box p { margin: 0; opacity: 0.7; }
    .interactive-card { cursor: pointer; user-select: none; }
    .interactive-card:hover { transform: translateY(-2px); }
    .elevation-scale { display: flex; gap: 0.5rem; flex-wrap: wrap; }
    .scale-item {
      width: 50px; height: 50px; border-radius: 8px;
      display: flex; align-items: center; justify-content: center;
      font-size: 0.65rem; font-family: monospace;
    }
    footer { text-align: center; margin-top: 3rem; opacity: 0.5; font-size: 0.9rem; }
    footer a { color: inherit; }
  </style>
</head>
<body class="light">

<header>
  <h1>‚¨ÜÔ∏è Lifted</h1>
  <p class="subtitle">
    Beautiful CSS shadows with layered depth.<br>
    Elevation from -1 (inner shadow) to 1 (drop shadow).
  </p>
</header>

<section class="controls">
  <div class="control-group">
    <label>Dark Mode</label>
    <button id="themeToggle">‚òÄÔ∏è Light</button>
  </div>
  <div class="control-group">
    <label id="elevationLabel">Elevation: 0.30</label>
    <input type="range" id="elevationSlider" min="-1" max="1" step="0.01" value="0.3">
  </div>
  <div class="control-group">
    <label id="angleLabel">Light Angle: -45¬∞</label>
    <input type="range" id="angleSlider" min="-180" max="180" step="1" value="-45">
  </div>
  <div class="control-group">
    <label>Background</label>
    <input type="color" id="bgColor" value="#FDFDFD">
  </div>
</section>

<div class="demo-grid">
  <div class="demo-section">
    <h3>Dynamic Elevation</h3>
    <div class="lifted-box" id="basicCard">
      <h4>Card Title</h4>
      <p id="elevationDisplay">Elevation: 0.30</p>
      <p id="shadowType" style="margin-top: 0.5rem; font-size: 0.8rem;"></p>
    </div>
  </div>

  <div class="demo-section">
    <h3>Interactive (Click for Inner Shadow)</h3>
    <div class="lifted-box interactive-card" id="interactiveCard">
      <h4>Hover & Click Me!</h4>
      <p>Click shows pressed state</p>
    </div>
  </div>

  <div class="demo-section">
    <h3>Full Elevation Scale (-1 to 1)</h3>
    <div class="elevation-scale" id="elevationScale"></div>
  </div>
</div>

<footer>
  <p>Inspired by <a href="https://www.joshwcomeau.com/css/designing-shadows/" target="_blank">Josh Comeau</a> & <a href="https://tobiasahlin.com/blog/layered-smooth-box-shadows/" target="_blank">Tobias Ahlin</a></p>
</footer>

<script>
const MAX_LAYERS = 5;
const BASE_OPACITY = 0.075;

function calculateShadowLayers(elevation, lightAngle, intensity = 1) {
  const clamped = Math.max(-1, Math.min(1, elevation));
  if (clamped === 0) return [];
  const isInset = clamped < 0;
  const abs = Math.abs(clamped);
  const activeCount = abs * MAX_LAYERS;
  const rad = lightAngle * (Math.PI / 180);
  const ratioX = Math.cos(rad);
  const ratioY = Math.sin(rad);
  const dir = isInset ? -1 : 1;
  const layers = [];
  for (let i = 0; i < MAX_LAYERS; i++) {
    const idx = i + 1;
    const base = Math.pow(2, i);
    if (idx <= activeCount) {
      layers.push({ x: base * ratioX * dir, y: base * ratioY * dir, blur: base, opacity: BASE_OPACITY, inset: isInset });
    } else if (idx - 1 < activeCount) {
      const p = activeCount - (idx - 1);
      layers.push({ x: base * ratioX * p * dir, y: base * ratioY * p * dir, blur: base * p, opacity: BASE_OPACITY * p, inset: isInset });
    }
  }
  return layers;
}

function hexToHSL(hex) {
  const r = parseInt(hex.slice(1, 3), 16) / 255;
  const g = parseInt(hex.slice(3, 5), 16) / 255;
  const b = parseInt(hex.slice(5, 7), 16) / 255;
  const max = Math.max(r, g, b), min = Math.min(r, g, b);
  let h = 0, s = 0, l = (max + min) / 2;
  if (max !== min) {
    const d = max - min;
    s = l > 0.5 ? d / (2 - max - min) : d / (max + min);
    switch (max) {
      case r: h = ((g - b) / d + (g < b ? 6 : 0)) / 6; break;
      case g: h = ((b - r) / d + 2) / 6; break;
      case b: h = ((r - g) / d + 4) / 6; break;
    }
  }
  return { h: Math.round(h * 360), s: Math.round(s * 100), l: Math.round(l * 100) };
}

function generateBoxShadow(elevation, lightAngle, bgColor, isDark) {
  const layers = calculateShadowLayers(elevation, lightAngle);
  if (!layers.length) return 'none';
  const hsl = hexToHSL(bgColor);
  const baseH = hsl.h;
  const baseS = isDark ? Math.max(0, hsl.s - 20) : Math.max(0, hsl.s * 0.6);
  const baseL = isDark ? Math.min(100, hsl.l + 30) : Math.max(10, hsl.l * 0.5);
  return layers.map(l => {
    const inset = l.inset ? 'inset ' : '';
    return `${inset}${l.x.toFixed(1)}px ${l.y.toFixed(1)}px ${l.blur.toFixed(1)}px hsl(${baseH} ${baseS}% ${baseL}% / ${l.opacity.toFixed(3)})`;
  }).join(', ');
}

let state = { isDark: false, elevation: 0.3, lightAngle: -45, bgColor: '#FDFDFD' };

function updateBasicCard() {
  const card = document.getElementById('basicCard');
  card.style.boxShadow = generateBoxShadow(state.elevation, state.lightAngle, state.bgColor, state.isDark);
  card.style.backgroundColor = state.bgColor;
  const type = state.elevation < 0 ? '(inner shadow)' : state.elevation > 0 ? '(drop shadow)' : '(no shadow)';
  document.getElementById('elevationDisplay').textContent = `Elevation: ${state.elevation.toFixed(2)}`;
  document.getElementById('shadowType').textContent = type;
  document.getElementById('elevationLabel').textContent = `Elevation: ${state.elevation.toFixed(2)}`;
  document.getElementById('angleLabel').textContent = `Light Angle: ${state.lightAngle}¬∞`;
}

function updateInteractiveCard(elev) {
  const card = document.getElementById('interactiveCard');
  card.style.boxShadow = generateBoxShadow(elev, state.lightAngle, state.bgColor, state.isDark);
  card.style.backgroundColor = state.bgColor;
}

function updateScale() {
  const container = document.getElementById('elevationScale');
  container.innerHTML = '';
  for (let e = -1; e <= 1; e += 0.25) {
    const item = document.createElement('div');
    item.className = 'scale-item';
    item.style.boxShadow = generateBoxShadow(e, state.lightAngle, state.bgColor, state.isDark);
    item.style.backgroundColor = state.bgColor;
    item.textContent = e.toFixed(2);
    container.appendChild(item);
  }
}

function updateAll() {
  updateBasicCard();
  updateInteractiveCard(0.2);
  updateScale();
}

document.getElementById('themeToggle').addEventListener('click', () => {
  state.isDark = !state.isDark;
  document.body.className = state.isDark ? 'dark' : 'light';
  document.getElementById('themeToggle').textContent = state.isDark ? 'üåô Dark' : '‚òÄÔ∏è Light';
  updateAll();
});

document.getElementById('elevationSlider').addEventListener('input', e => {
  state.elevation = parseFloat(e.target.value);
  updateBasicCard();
});

document.getElementById('angleSlider').addEventListener('input', e => {
  state.lightAngle = parseInt(e.target.value);
  updateAll();
});

document.getElementById('bgColor').addEventListener('input', e => {
  state.bgColor = e.target.value;
  updateAll();
});

const ic = document.getElementById('interactiveCard');
ic.addEventListener('mouseenter', () => updateInteractiveCard(0.6));
ic.addEventListener('mouseleave', () => updateInteractiveCard(0.2));
ic.addEventListener('mousedown', () => updateInteractiveCard(-0.2));
ic.addEventListener('mouseup', () => updateInteractiveCard(0.6));

updateAll();
</script>
</body>
</html>
